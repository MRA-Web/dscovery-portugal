<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Discovery Portugal</title>
    <link rel="shortcut icon" href="/assets/images/DiscoveryLogoIcon.ico">
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="/header/style.css">
    <link rel="stylesheet" href="/footer/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body onload="jogar_texto('/header/en.html', 'header'); jogar_texto('/footer/en.html', 'footer');">

    <header id="header"></header>

    <main>
        <div class="container">

            <div id="contact">
                <form method="POST" action="process_form.php" id="contactForm">
                    <h1>Contact-us</h1>
                    <label for="name">Name</label>
                    <input type="text" placeholder="Name" id="name" name="name" required>
                    
                    <label for="tel">Number</label>
                    <input type="tel" placeholder="(xx) xxxx-xxxx" id="tel" name="tel" required>
                    
                    <label for="email">E-mail</label>
                    <input type="email" placeholder="E-mail" id="email" name="email" required>
                    
                    <label for="subject">Subject</label>
                    <input type="text" placeholder="Subject" id="subject" name="subject" required>
                    
                    <label for="message">Message</label>
                    <textarea placeholder="Type here" id="message" name="message" required></textarea>
                    
                    <button type="submit" class="hover-button">Send</button>
                </form>
            </div>

            <div class="toggle-panel">
                <h1>Send your message</h1>
                <p>We look forward to hearing from you!</p>
            </div>
        </div>

        <div class="cards-bottom-container">
            <a class="card-bottom" href="#">
                <h3 class="title"><img src="/assets/images/contact_images/instagram-logo.png" alt="instagram" class="card-logo"></h3>
                
                <span class="subtitle">
                    @DscoveryPortugal
                </span>
            </a>

            <a class="card-bottom" href="#">
                <h3 class="title"><img src="/assets/images/contact_images/whatsapp-logo.png" alt="whatsapp" class="card-logo"></h3>
                
                <span class="subtitle">
                    Contacte via Whatsapp
                </span>
            </a>

            <a class="card-bottom" href="#">
                <h3 class="title" id="email"><img src="/assets/images/contact_images/email-logo.png" alt="email" class="card-logo"></h3>
                
                <span class="subtitle">
                    Contacte via email
                </span>
            </a>

            <a class="card-bottom" href="#">
                <h3 class="title"><img src="/assets/images/contact_images/facebook-logo.png" alt="facebook" class="card-logo"></h3>
                
                <span class="subtitle">
                    Contacte via Facebook
                </span>
            </a>


        </div>
    </main>

    <footer id="footer"></footer>

     <script src="/assets/script/functions.js"></script>
    <script src="/contact-us/form_script.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.3.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <script>
        document.getElementById('contactForm').addEventListener('submit', function(event) {
            event.preventDefault();
            var form = document.getElementById("contactForm");
            var nome = form.querySelector('input[name="name"]').value;
            var telefone = form.querySelector('input[name="tel"]').value;
            var email = form.querySelector('input[name="email"]').value;
            var assunto = form.querySelector('input[name="subject"]').value;
            var mensagem = form.querySelector('textarea[name="message"]').value;

            generateAndSendPDF(nome, telefone, email, assunto, mensagem);
        });

        const { jsPDF } = window.jspdf;

        function generateAndSendPDF(nome, telefone, email, assunto, mensagem) {
            var doc = new jsPDF();
            doc.text("Nome: " + nome, 10, 10);
            doc.text("Telefone: " + telefone, 10, 20);
            doc.text("Email: " + email, 10, 30);
            doc.text("Assunto: " + assunto, 10, 40);
            doc.text("Mensagem: " + mensagem, 10, 50);

            var pdfBlob = doc.output('blob');
            sendEmail(pdfBlob, email);
        }

        (function() {
            emailjs.init('mH7Y-YFYHmYbEO9h7'); // Substitua pela sua Public Key
        })();

        function sendEmail(pdfBlob, nome, telefone, email, assunto, mensagem) {
            var reader = new FileReader();
            reader.readAsDataURL(pdfBlob);
            reader.onloadend = function() {
                var base64data = reader.result.split(',')[1];
        
                var templateParams = {
                    to_email: email,          // Campo de destinat√°rio do email
                    name: nome,               // Corresponde ao {{name}} no template
                    tel: telefone,            // Corresponde ao {{tel}} no template
                    subject: assunto,         // Corresponde ao {{subject}} no template
                    message: mensagem,        // Corresponde ao {{message}} no template
                    pdf: base64data           // Este campo pode ser usado como anexo se suportado pelo template
                };
        
                emailjs.send('service_9skp7pg', 'template_25j1jmr', templateParams)
                    .then(function(response) {
                        console.log('Email enviado com sucesso!', response.status, response.text);
                    }, function(error) {
                        console.error('Falha ao enviar o email.', error);
                    });
            };
        }
    </script>
</body>
</html>
</body>
</html>
